<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pet Booking</title>
  <style>
    .hidden { display: none; }
    .calendar-day {
      display: inline-block;
      width: 30px;
      margin: 4px;
      padding: 5px;
      text-align: center;
      border: 1px solid #ccc;
      cursor: pointer;
    }
    .calendar-day.selected { background-color: lightblue; }
    .calendar-nav button { margin: 5px; }
  </style>
</head>
<body>

  <!-- Booking Type Selection -->
  <div id="bookingTypeSelection">
    <h2>Select Booking Type</h2>
    <button onclick="selectBookingType('dropin')">Drop-in Visit</button>
    <button onclick="selectBookingType('housesitting')">House Sitting</button>
  </div>

  <!-- Drop-in Calendar -->
  <div id="dropinPage" class="hidden">
    <h3>Select Drop-in Dates</h3>
    <div class="calendar-nav">
      <button onclick="changeMonth('dropin', -1)">← Previous</button>
      <span id="dropinMonthLabel"></span>
      <button onclick="changeMonth('dropin', 1)">Next →</button>
    </div>
    <div id="dropinCalendar"></div>
    <button onclick="goToTimeSlots()">Next: Select Time Slots</button>
  </div>

  <!-- Time Slot Selection -->
  <div id="timeSlotsPage" class="hidden">
    <h3>Select Time Slots</h3>
    <div id="selectedDatesList"></div>
    <button onclick="goBackToDropin()">← Back to Calendar</button>
    <button onclick="goToDropinForm()">Next: Contact Info</button>
  </div>

  <!-- Drop-in Contact Form -->
  <div id="dropinFormPage" class="hidden">
    <h3>Drop-in Booking Form</h3>
    <form>
      Name: <input type="text"><br><br>
      Email: <input type="email"><br><br>
      <button type="button" onclick="goBackToTimeSlots()">← Back to Time Slots</button>
      <button type="submit">Submit</button>
    </form>
  </div>

  <!-- House Sitting Calendar -->
  <div id="housesittingPage" class="hidden">
    <h3>Select House Sitting Dates</h3>
    <div class="calendar-nav">
      <button onclick="changeMonth('housesitting', -1)">← Previous</button>
      <span id="hsMonthLabel"></span>
      <button onclick="changeMonth('housesitting', 1)">Next →</button>
    </div>
    <div id="hsCalendar"></div>
    <button onclick="goToHouseSittingForm()">Next: Contact Info</button>
  </div>

  <!-- House Sitting Contact Form -->
  <div id="houseSittingFormPage" class="hidden">
    <h3>House Sitting Booking Form</h3>
    <form>
      Name: <input type="text"><br><br>
      Email: <input type="email"><br><br>
      <button type="button" onclick="goBackToHsCalendar()">← Back to Calendar</button>
      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    let selectedDates = [];
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    function selectBookingType(type) {
      document.getElementById("bookingTypeSelection").classList.add("hidden");
      if (type === 'dropin') {
        document.getElementById("dropinPage").classList.remove("hidden");
        renderCalendar("dropinCalendar", currentYear, currentMonth, "dropin");
      } else {
        document.getElementById("housesittingPage").classList.remove("hidden");
        renderCalendar("hsCalendar", currentYear, currentMonth, "housesitting");
      }
    }

    function renderCalendar(containerId, year, month, mode) {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const labelId = mode === "dropin" ? "dropinMonthLabel" : "hsMonthLabel";
      document.getElementById(labelId).innerText =
        new Date(year, month).toLocaleString("default", { month: "long", year: "numeric" });

      for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${year}-${(month + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
        const el = document.createElement("div");
        el.className = "calendar-day";
        el.textContent = day;
        if (selectedDates.includes(dateStr)) el.classList.add("selected");
        el.onclick = () => toggleDateSelection(dateStr, el);
        container.appendChild(el);
      }
    }

    function changeMonth(mode, delta) {
      currentMonth += delta;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      } else if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      if (mode === 'dropin') {
        renderCalendar("dropinCalendar", currentYear, currentMonth, "dropin");
      } else {
        renderCalendar("hsCalendar", currentYear, currentMonth, "housesitting");
      }
    }

    function toggleDateSelection(dateStr, el) {
      const i = selectedDates.indexOf(dateStr);
      if (i > -1) {
        selectedDates.splice(i, 1);
        el.classList.remove("selected");
      } else {
        selectedDates.push(dateStr);
        el.classList.add("selected");
      }
    }

    // Navigation logic for drop-in
    function goToTimeSlots() {
      if (selectedDates.length === 0) return alert("Please select at least one date.");
      document.getElementById("dropinPage").classList.add("hidden");
      const list = document.getElementById("selectedDatesList");
      list.innerHTML = selectedDates.map(d => `<div>${d}</div>`).join("");
      document.getElementById("timeSlotsPage").classList.remove("hidden");
    }

    function goBackToDropin() {
      document.getElementById("timeSlotsPage").classList.add("hidden");
      document.getElementById("dropinPage").classList.remove("hidden");
    }

    function goToDropinForm() {
      document.getElementById("timeSlotsPage").classList.add("hidden");
      document.getElementById("dropinFormPage").classList.remove("hidden");
    }

    function goBackToTimeSlots() {
      document.getElementById("dropinFormPage").classList.add("hidden");
      document.getElementById("timeSlotsPage").classList.remove("hidden");
    }

    // Navigation logic for house sitting
    function goToHouseSittingForm() {
      if (selectedDates.length === 0) return alert("Please select at least one date.");
      document.getElementById("housesittingPage").classList.add("hidden");
      document.getElementById("houseSittingFormPage").classList.remove("hidden");
    }

    function goBackToHsCalendar() {
      document.getElementById("houseSittingFormPage").classList.add("hidden");
      document.getElementById("housesittingPage").classList.remove("hidden");
    }
  </script>

</body>
</html>
